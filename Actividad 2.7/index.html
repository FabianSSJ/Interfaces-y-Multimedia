<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorio: Micro-interacción SVG</title>
    <style>
        :root {
            --primary: #2563eb;
            --success: #10b981;
            --text: #ffffff;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f3f4f6;
            font-family: 'Segoe UI', sans-serif;
        }

        /* Contenedor del Botón */
        .download-btn {
            position: relative;
            width: 200px;
            height: 60px;
            background-color: var(--primary);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .btn-text {
            color: var(--text);
            font-weight: 600;
            font-size: 16px;
            transition: opacity 0.2s;
        }

        /* Estilos del SVG */
        .icon-svg {
            width: 24px;
            height: 24px;
            fill: none;
            stroke: white;
            stroke-width: 2.5;
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* ESTADO: LOADING */
        .download-btn.loading {
            width: 60px;
            border-radius: 50%;
            background-color: transparent;
            border: 4px solid #e5e7eb;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
        }

        .download-btn.loading .btn-text,
        .download-btn.loading .icon-svg {
            display: none; /* Ocultamos el contenido interno durante el spin */
        }

        /* ESTADO: SUCCESS */
        .download-btn.success {
            width: 60px;
            border-radius: 50%;
            background-color: var(--success);
        }

        .download-btn.success .btn-text { display: none; }
        
        .download-btn.success .icon-svg {
            stroke-dasharray: 100;
            stroke-dashoffset: 0;
            animation: checkmark 0.5s ease-in-out;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes checkmark {
            from { stroke-dashoffset: 100; }
            to { stroke-dashoffset: 0; }
        }
    </style>
</head>
<body>

    <button class="download-btn" id="mainBtn">
        <svg class="icon-svg" viewBox="0 0 24 24" id="svgIcon">
            <path id="dynamicPath" d="M12 15V3m0 12l-4-4m4 4l4-4M4 17v2a2 2 0 002 2h12a2 2 0 002-2v-2" />
        </svg>
        <span class="btn-text">Descargar</span>
    </button>

    <script>
        const btn = document.getElementById('mainBtn');
        const path = document.getElementById('dynamicPath');

        btn.addEventListener('click', () => {
            if (btn.classList.contains('loading') || btn.classList.contains('success')) return;

            // 1. Iniciar Carga
            btn.classList.add('loading');
            
            // Simulamos una petición de red (3 segundos)
            setTimeout(() => {
                btn.classList.remove('loading');
                btn.classList.add('success');
                
                // 2. Transformar Path a un "Check" mediante optimización de puntos
                // Nueva ruta Bézier para el icono de completado
                path.setAttribute('d', 'M5 13l4 4L19 7');
                
                // Opcional: Resetear después de 3 segundos
                setTimeout(resetButton, 3000);
            }, 3000);
        });

        function resetButton() {
            btn.classList.remove('success');
            path.setAttribute('d', 'M12 15V3m0 12l-4-4m4 4l4-4M4 17v2a2 2 0 002 2h12a2 2 0 002-2v-2');
        }
    </script>
</body>
</html>